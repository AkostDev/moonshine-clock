document.addEventListener("alpine:init",()=>{Alpine.data("analogClock",t=>({size:t.size||300,baseSize:300,center:150,hourHandColor:t.hourHandColor||"#333333",minuteHandColor:t.minuteHandColor||"#666666",secondHandColor:t.secondHandColor||"#FF3333",centerDotColor:t.centerDotColor||"#333333",digitFont:t.digitFont||"Arial, sans-serif",digitFontSize:t.digitFontSize||16,digitColor:t.digitColor||"#000000",hourMarksColor:t.hourMarksColor||"#000000",minuteMarksColor:t.minuteMarksColor||"#666666",hourMarksThickness:t.hourMarksThickness||3,minuteMarksThickness:t.minuteMarksThickness||1.5,borderThickness:t.borderThickness||4,borderColor:t.borderColor||"#000000",backgroundColor:t.backgroundColor||"transparent",hourHandColorDark:t.hourHandColorDark||"#CCCCCC",minuteHandColorDark:t.minuteHandColorDark||"#AAAAAA",secondHandColorDark:t.secondHandColorDark||"#FF6666",centerDotColorDark:t.centerDotColorDark||"#CCCCCC",digitColorDark:t.digitColorDark||"#FFFFFF",hourMarksColorDark:t.hourMarksColorDark||"#FFFFFF",minuteMarksColorDark:t.minuteMarksColorDark||"#AAAAAA",borderColorDark:t.borderColorDark||"#FFFFFF",backgroundColorDark:t.backgroundColorDark||"#333333",currentHourHandColor:null,currentMinuteHandColor:null,currentSecondHandColor:null,currentCenterDotColor:null,currentDigitColor:null,currentHourMarksColor:null,currentMinuteMarksColor:null,currentBorderColor:null,currentBackgroundColor:null,showDigits:void 0===t.showDigits||t.showDigits,smoothSecondHand:void 0===t.smoothSecondHand||t.smoothSecondHand,clockSvgEl:null,hourHandEl:null,minuteHandEl:null,secondHandEl:null,animationFrameId:null,lastSecond:null,hourAngle:0,minuteAngle:0,secondAngle:0,init(){this.applyTheme(),this.initClock(),this.$el.style.maxWidth=this.size+"px",this.clockSvgEl.style.width="100%",this.isDarkModeAvailable()&&this.$watch("$store.darkMode.on",()=>{this.applyTheme(),this.createClockFace(),this.createHands(),this.applyHandAngles()}),this.smoothSecondHand?this.startSmoothSecondAnimation():(this.updateHands(),setInterval(()=>this.updateHands(),1e3))},isDarkModeAvailable(){return void 0!==this.$store&&void 0!==this.$store.darkMode&&void 0!==this.$store.darkMode.on},applyTheme(){var t=!!this.isDarkModeAvailable()&&this.$store.darkMode.on;this.currentHourHandColor=t?this.hourHandColorDark:this.hourHandColor,this.currentMinuteHandColor=t?this.minuteHandColorDark:this.minuteHandColor,this.currentSecondHandColor=t?this.secondHandColorDark:this.secondHandColor,this.currentCenterDotColor=t?this.centerDotColorDark:this.centerDotColor,this.currentDigitColor=t?this.digitColorDark:this.digitColor,this.currentHourMarksColor=t?this.hourMarksColorDark:this.hourMarksColor,this.currentMinuteMarksColor=t?this.minuteMarksColorDark:this.minuteMarksColor,this.currentBorderColor=t?this.borderColorDark:this.borderColor,this.currentBackgroundColor=t?this.backgroundColorDark:this.backgroundColor},initClock(){this.clockSvgEl=this.$refs.clockSvg,this.createClockFace(),this.createHands()},createClockFace(){for(var e=this.center-this.borderThickness;this.clockSvgEl.firstChild;)this.clockSvgEl.removeChild(this.clockSvgEl.firstChild);var t=document.createElementNS("http://www.w3.org/2000/svg","circle"),t=(t.setAttribute("cx",this.center),t.setAttribute("cy",this.center),t.setAttribute("r",e.toString()),t.setAttribute("fill",this.currentBackgroundColor),this.clockSvgEl.appendChild(t),document.createElementNS("http://www.w3.org/2000/svg","circle"));t.setAttribute("cx",this.center),t.setAttribute("cy",this.center),t.setAttribute("r",e.toString()),t.setAttribute("fill","none"),t.setAttribute("stroke",this.currentBorderColor),t.setAttribute("stroke-width",this.borderThickness.toString()),this.clockSvgEl.appendChild(t);for(let t=0;t<60;t++){var r=t%5==0,o=document.createElementNS("http://www.w3.org/2000/svg","line"),i=2*Math.PI*t/60,n=e-5,s=n-(r?15:8),l=this.center+s*Math.sin(i),s=this.center-s*Math.cos(i),a=this.center+n*Math.sin(i),n=this.center-n*Math.cos(i);o.setAttribute("x1",l.toString()),o.setAttribute("y1",s.toString()),o.setAttribute("x2",a.toString()),o.setAttribute("y2",n.toString()),o.setAttribute("stroke",r?this.currentHourMarksColor:this.currentMinuteMarksColor),o.setAttribute("stroke-width",r?this.hourMarksThickness:this.minuteMarksThickness),this.clockSvgEl.appendChild(o)}if(this.showDigits)for(let t=1;t<=12;t++){var h=document.createElementNS("http://www.w3.org/2000/svg","text"),d=(h.textContent=t.toString(),h.setAttribute("text-anchor","middle"),h.setAttribute("dominant-baseline","central"),h.setAttribute("font-family",this.digitFont),h.setAttribute("font-size",(1.5*this.digitFontSize).toString()+"px"),h.setAttribute("fill",this.currentDigitColor),2*Math.PI*(t%12)/12),c=e-37.5,u=this.center+c*Math.sin(d),c=this.center-c*Math.cos(d);h.setAttribute("x",u.toString()),h.setAttribute("y",c.toString()),this.clockSvgEl.appendChild(h)}},createHands(){var t=document.createElementNS("http://www.w3.org/2000/svg","line"),t=(t.setAttribute("x1",this.center),t.setAttribute("y1",this.center),t.setAttribute("x2",this.center),t.setAttribute("y2",(this.center-60).toString()),t.setAttribute("stroke",this.currentHourHandColor),t.setAttribute("stroke-width","5"),t.setAttribute("stroke-linecap","round"),t.style.transformOrigin=`${this.center}px ${this.center}px`,t.style.transition="transform 0.2s ease-in-out",this.clockSvgEl.appendChild(t),this.hourHandEl=t,document.createElementNS("http://www.w3.org/2000/svg","line")),t=(t.setAttribute("x1",this.center),t.setAttribute("y1",this.center),t.setAttribute("x2",this.center),t.setAttribute("y2",(this.center-90).toString()),t.setAttribute("stroke",this.currentMinuteHandColor),t.setAttribute("stroke-width","3"),t.setAttribute("stroke-linecap","round"),t.style.transformOrigin=`${this.center}px ${this.center}px`,t.style.transition="transform 0.2s ease-in-out",this.clockSvgEl.appendChild(t),this.minuteHandEl=t,document.createElementNS("http://www.w3.org/2000/svg","line")),t=(t.setAttribute("x1",this.center),t.setAttribute("y1",(this.center+20).toString()),t.setAttribute("x2",this.center),t.setAttribute("y2",(this.center-105).toString()),t.setAttribute("stroke",this.currentSecondHandColor),t.setAttribute("stroke-width","2"),t.setAttribute("stroke-linecap","round"),t.style.transformOrigin=`${this.center}px ${this.center}px`,this.clockSvgEl.appendChild(t),this.secondHandEl=t,document.createElementNS("http://www.w3.org/2000/svg","circle"));t.setAttribute("cx",this.center.toString()),t.setAttribute("cy",this.center.toString()),t.setAttribute("r","4"),t.setAttribute("fill",this.currentCenterDotColor),this.clockSvgEl.appendChild(t)},startSmoothSecondAnimation(){this.updateHourMinuteHands();const r=()=>{var t=new Date,e=t.getSeconds(),t=t.getMilliseconds();this.secondAngle=6*(e+t/1e3)%360,this.secondHandEl.style.transform=`rotate(${this.secondAngle}deg)`,e!==this.lastSecond&&(this.updateHourMinuteHands(),this.lastSecond=e),this.animationFrameId=requestAnimationFrame(r)};this.lastSecond=(new Date).getSeconds(),this.animationFrameId=requestAnimationFrame(r)},updateHourMinuteHands(){var t=new Date,e=t.getMinutes(),r=t.getHours()%12,t=t.getSeconds();this.hourAngle=30*r+.5*e,this.minuteAngle=6*e+.1*t,this.hourHandEl.style.transform=`rotate(${this.hourAngle}deg)`,this.minuteHandEl.style.transform=`rotate(${this.minuteAngle}deg)`},updateHands(){var t=new Date,e=t.getSeconds(),r=t.getMinutes(),t=t.getHours()%12;this.hourAngle=30*t+.5*r,this.minuteAngle=6*r+.1*e,this.secondAngle=6*e,this.hourHandEl.style.transform=`rotate(${this.hourAngle}deg)`,this.minuteHandEl.style.transform=`rotate(${this.minuteAngle}deg)`,this.smoothSecondHand||(this.secondHandEl.style.transform=`rotate(${this.secondAngle}deg)`)},applyHandAngles(){this.hourHandEl&&(this.hourHandEl.style.transform=`rotate(${this.hourAngle}deg)`),this.minuteHandEl&&(this.minuteHandEl.style.transform=`rotate(${this.minuteAngle}deg)`),this.secondHandEl&&!this.smoothSecondHand&&(this.secondHandEl.style.transform=`rotate(${this.secondAngle}deg)`)}}))});
